---
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r summary_libs, echo=FALSE, results='hide', include=FALSE}
library(dplyr)
library(janitor)
library(readr)
library(tibble)
library(tidyr)

library(yaml)
library(kableExtra)

source('../src/munge.R')
```

## Patient Summary
```{r summary_config}
tcga_tpm_percentile_min <- .25
tcga_tpm_percentile_max <- .75

```

```{r summary_pttable}
if(exists('subtype')){
  pt_dat$Subtype <- subtype
}

pt_dat %>% 
  knitr::kable('html') %>%
  kable_styling(full_width = F, font_size = 16, position = 'left')
  #kable_styling("striped", full_width = F, font_size = 16, position = 'left')

```

```{r summary_goitable}
summary_goi_tab <- goi_tab %>%
  filter(`Percentile TCGA` < tcga_tpm_percentile_min | `Percentile TCGA` > tcga_tpm_percentile_max) 
caption = paste0('Genes of interest with low (<', 
                 tcga_tpm_percentile_min,
                 ') or high (>',
                 tcga_tpm_percentile_max,
                 ') gene expression relative to TCGA.'
)
dt_quantile_ramp(summary_goi_tab, c('Percentile PACT', 'Percentile TCGA'), caption)

```
